{{ 'product.css' | asset_url | stylesheet_tag }}
{% for variant in product.variants %}
    {% unless variant.available %}
        {% style %}
            .product_variants{
                display: none;
            }
        {% endstyle %}
    {% endunless %}
{% endfor %}
<div class="product-template">
    <div class="container">
    {%  form 'product', product %} 
        <input type="hiidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
        <div class="product">
            <div class="row">
                <div class="product__images">
                    <div class="product__image">
                        <div>
                             {% if product.featured_image %}
                                <img src="{{ product.featured_image | img_url: 'master' }}" alt="#" class="product__image-big">
                            {% else %}
                                {{ 'product-1' | placeholder_svg_tag }}
                            {% endif %}
                        </div>
                    </div>
                    <div class="product__small-images">
                        {% for image in product.images %}
                            <div>
                                <img src="{{ image | img_url: 'master' }}" alt="#" class="product__image-sm">
                            </div>
                        {% endfor %}
                        {% for variant in product.variants %}
                            <div class="product__variant-img">
                                <img src="{{ variant.image | img_url: 'master' }}" alt="#" class="product__image-sm" name="{{ variant.id }}">
                            </div>
                        {% endfor %}
                    </div>
                    {% if product.metafields.custom.show_arrow %}
                        {% render 'new-product-arrow-icon' %}
                        {% render 'new-product-mobile-arrow-icon' %}
                    {% endif %}
                </div>
                <div class="product__info">
                    <div class="product__info-inner">
                        {% if product.title contains 'Fucking Strong Coffee from ' %}
                            <h4 class="product__title-sm">So fucking strong coffee from...</h4>
                            <h3 class="product__title-xl">{{ product.title | upcase | remove: 'FUCKING STRONG COFFEE FROM '  }}</h3>
                        {% else %}
                            <h3 class="product__title-xl">{{ product.title | upcase }}</h3>
                        {% endif %}
                        
                        <div class="product__price">{{ product.price | money }}</div>
                        <div class="product__tax">Tax included</div>
                        {% if product.metafields.product.hide-usp %}
                            <div class="product__usp">
                                <ul>
                                    {% if product.metafields.usp.label_1 != blank and product.metafields.usp.label_2 != blank and product.metafields.usp.label_3 != blank and product.metafields.usp.label_4 != blank %}
                                        <li style="background-image: url({{  section.blocks[0].settings.image | img_url: 'mmaster' }})">
                                            {{ product.metafields.usp.label_1 }}
                                        </li>
                                        <li style="background-image: url({{ section.blocks[1].settings.image | img_url: 'mmaster' }})">
                                            {{ product.metafields.usp.label_2 }}
                                        </li>
                                        <li style="background-image: url({{ section.blocks[2].settings.image | img_url: 'mmaster' }})">
                                            {{ product.metafields.usp.label_3 }}
                                        </li>
                                        <li style="background-image: url({{ section.blocks[3].settings.image | img_url: 'mmaster' }})">
                                            {{ product.metafields.usp.label_4 }}
                                        </li>
                                    {% elsif product.metafields.usp.label_1 != blank and product.metafields.usp.label_2 != blank and product.metafields.usp.label_3 != blank %}
                                        <li style="background-image: url({{  section.blocks[0].settings.image | img_url: 'mmaster' }})">
                                            {{ product.metafields.usp.label_1 }}
                                        </li>
                                        <li style="background-image: url({{ section.blocks[1].settings.image | img_url: 'mmaster' }})">
                                            {{ product.metafields.usp.label_2 }}
                                        </li>
                                        <li style="background-image: url({{ section.blocks[2].settings.image | img_url: 'mmaster' }})">
                                            {{ product.metafields.usp.label_3 }}
                                        </li>
                                    {% elsif product.metafields.usp.label_1 != blank and product.metafields.usp.label_2 != blank %}
                                        <li style="background-image: url({{  section.blocks[0].settings.image | img_url: 'mmaster' }})">
                                            {{ product.metafields.usp.label_1 }}
                                        </li>
                                        <li style="background-image: url({{ section.blocks[1].settings.image | img_url: 'mmaster' }})">
                                            {{ product.metafields.usp.label_2 }}
                                        </li>
                                    {% elsif product.metafields.usp.label_1 != blank %}
                                        <li style="background-image: url({{  section.blocks[0].settings.image | img_url: 'mmaster' }})">
                                            {{ product.metafields.usp.label_1 }}
                                        </li>
                                    {% else %}
                                        {% for block in section.blocks %}
                                            <li style="background-image: url({{ block.settings.image | img_url: 'mmaster' }})">
                                                {{ block.settings.title }}
                                            </li>
                                        {% endfor %}
                                    {% endif %}
                                </ul>
                            </div>
                        {% endif %}
                        <form action="{{ routes.cart_add_url }}" method="post" id="AddToCart">
                            <div class="product_variants">
                                {% for variant in product.variants %}
                                    {% if variant.available %}
                                        <input type="radio" value="{{ variant.id }}" id="{{ variant.id }}" name="product_variant" class="product__variant-option">
                                        <label for="{{ variant.id }}">{{ variant.title }}</label>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <select name="id" id="productSelect">
                                {% for variant in product.variants %}
                                {% if variant.available %}
                                    <option value="{{ variant.id }}">
                                    {{ variant.title }}
                                    </option>
                                {% else %}
                                    <option disabled="disabled">
                                    {{ variant.title }} - sold out
                                    </option>
                                {% endif %}
                                {% endfor %}
                            </select>
                            <button type="submit" name="add" class="product__button" id="AddToCart">add to cart</button>
                        </form>
                        <div class="product__description">
                            {% if product.description != blank %}
                                {{ product.description  }}
                            {%  else %}
                                <p>The return of our much-loved, super special edition single estate Kenyan coffee.</p>
                                <p>Our origin partner Gloria and the folks at Sakami Coffee in Kenya have been churning out beautiful harvests from the slopes of Mt. Elgon for over a decade, tirelessly building one of the most sustainable specialty coffee farms in the country.</p>
                                <p>Bright and bold, this may just be our most indulgent coffee yet. Features beautifully as a filter coffee or cold brew.</p>
                                <p>For the nerds: this is a Washed AA from Batian cultivars intercropped with Macadamia shade trees. The Sakami wet mill is powered entirely by solar energy.</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            <div class="product__tabs">
                <ul class="product__tabs-titles">
                    <li class="product-tab-1 product-tab-active" data-title="tab-1">{{ section.settings.tab-title-1 }}</li>
                    <li class="product-tab-2" data-title="tab-2">{{ section.settings.tab-title-2 }}</li>
                    <li class="product-tab-3" data-title="tab-3">{{ section.settings.tab-title-3 }}</li>
                </ul>
                <div class="product__tabs-content product__tabs-content-1 active" id="tab-1">
                    {% if product.metafields.tab.first_tab_common_text != blank %}
                        <p>{{ product.metafields.tab.first_tab_common_text | newline_to_br }}</p>
                    {% else %}
                       {{ section.settings.tab-text-1 }}
                    {% endif %}
                </div>
                <div class="product__tabs-content product__tabs-content-2" id="tab-2">
                    <div class="tabs__welcome-block">
                        <div class="tabs__welcome-image">
                            <div class="tabs__welcome-image-bg">
                                {% if section.settings.scarp-booky %}
                                    <style>
                                        .tabs__welcome-block{
                                            max-width: 100%;
                                            width: 100%;
                                        }

                                        .tabs__welcome-image-bg{
                                            background-image: none;
                                            max-width: 593px;
                                            height: 100%;
                                        }

                                        .tabs__welcome-image-bg>img{
                                            padding: 0;
                                        }
                                    </style>
                                    {% if product.metafields.tab.second_tab_first_image != blank %}
                                        {{ product.metafields.tab.second_tab_first_image | img_url: 'master' | img_tag }}
                                    {% else %}
                                        {{ section.settings.tab-2-img-1 | img_url: 'master' | img_tag }}
                                    {% endif %}
                                {% else %}
                                    {% if product.metafields.tab.second_tab_first_image != blank %}
                                        {{ product.metafields.tab.second_tab_first_image | img_url: 'master' | img_tag }}
                                    {% else %}
                                        {{ section.settings.tab-2-img-1 | img_url: 'master' | img_tag }}
                                    {% endif %}
                                    <div>
                                        {{ 'patch-icon.png' | asset_url | img_tag }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="tabs__welcome-text">
                            <h3>
                                {% if product.metafields.tab.second_tab_first_title %}
                                    {{ product.metafields.tab.second_tab_first_title }}
                                {% else %}
                                    {{ section.settings.tab-2-title-1 }}
                                {% endif %}
                            </h3>
                            {% if product.metafields.tab.second_tab_first_text != blank %}
                                <p>{{ product.metafields.tab.second_tab_first_text | newline_to_br }}</p>
                            {% else %}
                                {{ section.settings.tab-2-text-1 }}
                            {% endif %}
                        </div>
                    </div>
                    <div class="tabs__video">
                        <video poster="https://cdn.shopify.com/s/files/1/0701/1755/6519/files/Rectangle_9.png?v=1674119199">
                        {% if product.metafields.tab.second_tab_video != blank %}
                            <source src="{{ product.metafields.tab.second_tab_video | file_url }}" type="video/mp4">
                        {% else %}
                            <source src="{{ section.settings.video-link }}" type="video/mp4">
                        {% endif %}
                            
                        </video>
                        <div class="video-play-button">
                            {% render 'video-play-button-icon' %}
                        </div>
                        <div class="video-pause-button" style="display: none;">
                            {% render 'video-pause-button-icon' %}
                        </div>
                        {% unless section.settings.scarp-booky %}
                            <div class="video-patch-1">
                                {{ 'patch-icon-2.png' | asset_url | img_tag }}
                            </div>
                            <div class="video-patch-2">
                                {{ 'patch-icon-2.png' | asset_url | img_tag }}
                            </div>
                        {% endunless %}
                    </div>
                    <div class="tabs__info-block">
                        <div class="tabs__info-text">
                            <h3>
                                {% if product.metafields.tab.second_tab_second_title %}
                                    {{ product.metafields.tab.second_tab_second_title }}
                                {% else %}
                                    {{ section.settings.tab-2-title-2 }}
                                {% endif %}
                            </h3>
                            {% if product.metafields.tab.second_tab_second_text != blank %}
                                <p>{{ product.metafields.tab.second_tab_second_text | newline_to_br }}</p>
                            {% else %}
                                {{ section.settings.tab-2-text-2 }}
                            {% endif %}
                        </div>
                        <div class="tabs__welcome-image">
                            {% if product.metafields.tab.tab.second_tab_second_image != blank %}
                                {{ product.metafields.tab.tab.second_tab_second_image | img_url: 'master' | img_tag }}
                            {% else %}
                                {{ section.settings.tab-2-img-2 | img_url: 'master' | img_tag }}
                            {% endif %}
                        </div>
                    </div>
                    <div class="tabs__map">
                        <h4>
                            {% if product.metafields.tab.second_tab_map_title %}
                                {{ product.metafields.tab.second_tab_map_title }}
                            {% else %}
                                {{ section.settings.map-title }}
                            {% endif %}
                        </h4>
                        {% if product.metafields.tab.second_tab_map_iframe %}
                            {{ product.metafields.tab.second_tab_map_iframe }}
                        {% else %}
                            <iframe width="100%" height="493" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?width=100%25&amp;height=493&amp;hl=en&amp;q=NewYork+(My%20Business%20Name)&amp;t=&amp;z=13&amp;ie=UTF8&amp;iwloc=B&amp;output=embed"></iframe>
                        {% endif %}
                    </div>
                </div>
                <div class="product__tabs-content product__tabs-content-3" id="tab-3">
                    {% if product.metafields.tab.third_tab_common_text != blank %}
                        <p>{{ product.metafields.tab.third_tab_common_text | newline_to_br }}</p>
                    {% else %}
                       {{ section.settings.tab-text-3 }}
                    {% endif %}
                </div>
            </div>
        </div>
    {% endform %}
            
    </div>
</div>



{% render 'scroll-down' %}

{% schema %}
    {
        "name": "Product",
        "settings": [
            {
                "type": "text",
                "id": "tab-title-1",
                "default": "About this project",
                "label": "1st tab title"
            },
            {
                "type": "richtext",
                "id": "tab-text-1",
                "label": "1st tab text content"
            },
            {
                "type": "text",
                "id": "tab-title-2",
                "default": "About the producer",
                "label": "2nd tab title"
            },
            {
                "type": "image_picker",
                "id": "tab-2-img-1",
                "label": "2nd tab 1st block icon"
            },
            {
                "type": "text",
                "id": "tab-2-title-1",
                "label": "2nd tab 1st block title",
                "default": "Hello, my name is Chaia"
            },
            {
                "type": "richtext",
                "id": "tab-2-text-1",
                "label": "2nd tab 1st block text"
            },
            {
                "type": "text",
                "id": "video-link",
                "label": "2nd tab video link",
                "default": "https://cdn.shopify.com/videos/c/o/v/bfae7e74ecd54690a5d4aace6642c96b.mp4"
            },
            {
                "type": "image_picker",
                "id": "tab-2-img-2",
                "label": "2nd tab 2nd block icon"
            },
            {
                "type": "text",
                "id": "tab-2-title-2",
                "label": "2nd tab 2nd block title",
                "default": "Hello, my name is Chaia"
            },
            {
                "type": "richtext",
                "id": "tab-2-text-2",
                "label": "2nd tab 2nd block text"
            },
            {
                "type": "text",
                "id": "map-title",
                "label": "Map title",
                "default": "THIS IS WHERE I WORK"
            },
            {
                "type": "text",
                "id": "tab-title-3",
                "default": "About fucking strong coffee",
                "label": "3th tab title"
            },
            {
                "type": "richtext",
                "id": "tab-text-3",
                "label": "3th tab text content"
            },
            {
                "type": "checkbox",
                "id": "scarp-booky",
                "label": "Off scarp booky mode",
                "default": false
            }
        ],
        "max_blocks": 4,
        "blocks": [
            {
                "name": "USP item",
                "type": "block",
                "settings": [
                    {
                        "type": "image_picker",
                        "id": "image",
                        "label": "Item icon"
                    },
                    {
                        "type": "text",
                        "id": "title",
                        "label": "Item title",
                        "default": "LOREM IPSUM DOLOREM"
                    }
                ]
            }
        ]
    }
{% endschema %}